# Лабораторная работа №1. Паттерн «Стратегия»

- [Лабораторная работа №1. Паттерн «Стратегия»](#лабораторная-работа-1-паттерн-стратегия)
  - [Критерии оценивания лабораторной работы](#критерии-оценивания-лабораторной-работы)
  - [Задание 1 — учим птиц танцевать (30 баллов)](#задание-1--учим-птиц-танцевать-30-баллов)
    - [Бонус 15 баллов за тестирование метода `Duck::Dance`](#бонус-15-баллов-за-тестирование-метода-duckdance)
  - [Задание 2 — добавляем состояние к стратегии (30 баллов)](#задание-2--добавляем-состояние-к-стратегии-30-баллов)
  - [Задание 3 — функциональный стиль (50 баллов)](#задание-3--функциональный-стиль-50-баллов)

## Критерии оценивания лабораторной работы

При сдаче лабораторной работы студент должен уметь ответить на вопросы преподавателя насчёт используемых паттернов проектирования,
уметь изобразить схему паттерна на диаграмме классов, а также продемонстрировать диаграмму классов своего приложения.

- На оценку «удовлетворительно» необходимо набрать 120 баллов.
- На оценку «хорошо» необходимо набрать 300 баллов.
- На оценку «отлично» необходимо набрать 400 баллов.

## Задание 1 — учим птиц танцевать (30 баллов)

Доработайте программу SimUDuck, научив уток танцевать с использованием
паттерна «Стратегия». MallardDuck умеет танцевать вальс, а RedHeadDuck
— менуэт. Искусственные утки танцевать не умеют.

Подумайте, должен ли метод `Dance` в стратегии танца быть константным? Обоснуйте свой ответ.

### Бонус 15 баллов за тестирование метода `Duck::Dance`

Бонус начисляется за наличие теста для метода `Duck::Dance`. Тест не должен полагаться на вывод информации в stdout.
Вместо этого используйте Mock-реализацию `DanceBehavior`.

## Задание 2 — добавляем состояние к стратегии (30 баллов)

Доработайте программу SimUDuck таким образом, чтобы утки, умеющие
летать, вели учет количества вылетов и выводили порядковый номер своего
вылета в stdout. Примечание: от утки не требуется помнить число вылетов
после смены стратегии полёта.

Доработайте программу так, чтобы утки, которые умеют летать любым способом, после каждого
второго полёта крякали от удовольствия (при условии, что умеют хоть как то крякать),
а утки, которые не умеют летать, этого не делали.

Внимание, архитектура программы должна позволять легко изменять (изменив буквально несколько строк кода) поведение утки так,
чтобы летающие утки крякали от удовольствия **перед** каждым чётным или нечётным полётом, а не после него.
Нелетающие утки не должны крякать перед полётом.

Если при реализации этого поведения в программе появится связь между стратегией полёта и стратегией кряканья,
с архитектурной точки зрения это будет неправильным, так как появится связь между не "крыльями" и "клювом".
Кроме того, стратегию полета могут использовать не только утки, а, например, воробьи, которые крякать не должны.

Напишите юнит-тест для проверки этого поведения.
Тест должен использовать Mock-реализации стратегий и не полагаться на выводимые данные.

## Задание 3 — функциональный стиль (50 баллов)

Напишите версию приложения SimUDuck, в которой паттерн «Стратегия» используется в функциональном стиле.
Должен быть реализован функционал танцев уток и счётчика полётов.
Чтобы функция обладала состоянием, используйте замыкание.
В C++ замыкание с изменяемым состоянием реализуется при помощи mutable лямбда-функций.

Внимание, получившиеся утки должны реализовывать функционал предыдущих двух заданий.
